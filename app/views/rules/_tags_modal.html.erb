<!-- Tag Modal -->
<div id="rule-add-tags" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="ruleAddTagsLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="ruleAddTagsLabel">法條新增標籤</h3>
  </div>
  <div class="modal-body" style="height:300px">
    <%= form_for 'add', :url => add_tags_rule_path(rule), :html => {:id => 'add-tags-form'} do |f| %>
      <label>標籤</label>
      <%= f.text_field 'tags', :'data-provide' => 'typeahead', :style => 'width: 450px;' %>
      <%= f.submit '送出', :class => 'btn btn-primary pull-right' %>
    <% end %>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>

<script type="text/javascript" charset="utf-8">
$(function(){
  var tag_id;
  $('#add_tags').typeahead({
    source: <%== tags_array %>,
    updater: function(item){
      tag_id = item.replace(/\..*/, '')
      $('#add-tags-form').append('<span class="label label-info">' + item + '</span> ');
      $('#add-tags-form').append('<input name="new_tags[]" type="hidden" value="' + tag_id + '">')
    }
  });
})
</script>